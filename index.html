<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Kyle's Website</title>
    <link rel="stylesheet" href="styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <script src="app.js" defer></script>
  </head>
  <body>
    <header>
      <h1>My own website! Here are some things about myself.</h1>
    </header>
    <main>
      <section id="ranks-section">
        <h2>Ranks:</h2>
        <div id="rank-cards">
          <div class="rank-card">
            <div id="game-title">Teamfight Tactics</div>
            <img id="tft-rank-icon" src="" alt="Rank Icon" />
            <div id="tft-tier">Loading...</div>
            <div id="tft-lp"></div>
            <div id="tft-peak">
              <div id="tft-peak-text">PEAK:</div>
              <img
                id="tft-peak-rank-icon"
                src="img/tft_icons/master rank icon.png"
                alt="Rank Icon"
              />
              <div id="tft-peak-text">MASTER 85 LP</div>
            </div>
          </div>
          <div class="rank-card">
            <div id="game-title">VALORANT</div>
            <img
              id="valorant-rank-icon"
              src="img/val_icons/Platinum_3_Rank.png"
              alt="Rank Icon"
            />
            <div id="valorant-tier">PLATINUM 3</div>
            <div id="valorant-rr">50 RR</div>
            <div id="val-peak">
              <div id="val-peak-text">PEAK:</div>
              <img
                id="val-peak-rank-icon"
                src="img/val_icons/Ascendant_2_Rank.png"
                alt="Rank Icon"
              />
              <div id="val-peak-text">ASCENDANT II 23 RR</div>
            </div>
          </div>
          <div class="rank-card">
            <div id="game-title">Rocket League</div>
            <img
              id="rl-rank-icon"
              src="img/rl_icons/c2_rank_icon.png"
              alt="Rank Icon"
            />
            <div id="rl-tier">Champion II</div>
            <div id="rl-mmr">1201 MMR</div>
            <div id="rl-peak">
              <div id="rl-peak-text">PEAK:</div>
              <img
                id="rl-peak-rank-icon"
                src="img/rl_icons/gc2_rank_icon.png"
                alt="Rank Icon"
              />
              <div id="rl-peak-text">Grand Champion II 1630 MMR</div>
            </div>
          </div>
        </div>
        <script>
          async function loadTftRank() {
            try {
              const response = await fetch("/rank-data");
              const data = await response.json();

              if (!data.length) {
                document.getElementById("tier").textContent = "No ranked data";
                return;
              }

              const rank = data.find(
                (queue) => queue.queueType === "RANKED_TFT",
              );
              const tier = rank.tier.toLowerCase() + " rank icon";
              const iconUrl = `img/tft_icons/${tier}.png`;
              document.getElementById("tft-tier").textContent =
                `${rank.tier} ${rank.rank}`;
              document.getElementById("tft-lp").textContent =
                `${rank.leaguePoints} LP`;
              document.getElementById("tft-rank-icon").src = iconUrl;
            } catch (err) {
              console.error(err);
              document.getElementById("tft-tier").textContent =
                "Failed to load rank";
            }
          }
          loadTftRank();
        </script>
      </section>

      <section id="tech-stack">
        <h2>Tech Stack:</h2>
        <u>Proficient:</u>
        <div class="tech-stack-box">
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/java.png" alt="java.png" />
            <p>Java</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/mysql.png" alt="mysql.png" />
            <p>MySQL</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/html.png" alt="html.png" />
            <p>HTML</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/css.png" alt="css.png" />
            <p>CSS</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/vscode.png" alt="vscode.png" />
            <p>Visual Studio Code</p>
          </div>
        </div>
        <u>Moderate:</u>
        <div class="tech-stack-box">
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/c.png" alt="c.png" />
            <p>C</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/git.png" alt="git.png" />
            <p>git</p>
          </div>
          <div class="tech-stack-icon">
            <img
              src="img/tech_stack_icons/javascript.jpg"
              alt="javascript.jpg"
            />
            <p>JavaScript</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/python.png" alt="python.png" />
            <p>Python</p>
          </div>
        </div>
        <u>Learning:</u>
        <div class="tech-stack-box">
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/cursor.png" alt="cursor.png" />
            <p>Cursor</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/mongodb.png" alt="mongodb.png" />
            <p>mongoDB</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/react.png" alt="react.png" />
            <p>React</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/r.png" alt="r.png" />
            <p>R</p>
          </div>
          <div class="tech-stack-icon">
            <img src="img/tech_stack_icons/node.png" alt="node.png" />
            <p>nodeJS</p>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
